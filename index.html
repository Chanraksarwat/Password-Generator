<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Password Generator</title>
    <link rel="stylesheet" type="text/css" href="style.css">

    <style>
        /* Test styles */
    </style>

    <script>
        // Start Psuedo code
        // The user will be prompted to choose from the following password criteria: 8 and 128 characters
        // The user will recieve a confirm for: 
        // Password containing special characters, numbers, and uppercase
        // Either 4 variables individual ones, or 3 with toLowerCase to Uppercase conversion
        // This will need to randomly generate a selection or randomly select array data, so math.random and math.floor will need to be used.     
        // The application should validate user input and ensure that at least one character type is selected.
        // Solution: If, else if statement (similar to car input)
        // Problem: Once all prompts are answered, the user will be presented with a password matching the answered prompts. Displaying the generated password in an alert is acceptable, but attempt to write the password to the page instead.
        // Solution: setAttribute
        // Problem: As a bonus, the user should also have the option to click a button to copy the password to their clipboard.
        // While loop?           
        // Solution: Event listener?
        // Use appendchild lesson from today to add password to textarea 

        // Start working code
        // User input variables: 

        var enter;

        var confirmNumber;
        var confirmCharacter;
        var confirmUppercase;

        function generatePassword() {
            enter = parseInt(prompt("How many characters would you like your password? Choose between 8 and 128"));
            console.log(enter);

            confirmNumber = confirm("Will this contain numbers?");
            confirmCharacter = confirm("Will this contain special characters?");
            confirmUppercase = confirm("Will this contain Uppercase letters?");
            // Use this variable to add to if/else stateme
            //var confirmLower = confirm("Will this contain Lowercase letters?");

            // Start Password variables: 
            // Special characters 
            var character = ["!", "#", "$", "%", "&", "'", "(", ")", "*", "+", ",", "-", ".", "/", "\:", "\;", " < ", "=", " > ", " ? ", "@", "[", "\\", "]", " ^ ", "_", "`", "{", "|", "}", "~"];
            // Numeric characters
            var number = [1, 2, 3, 4, 5, 6, 7, 8, 9];
            // Alphabetical characters
            var alpha = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
            // Choices declared outside the if statement so they can be concatenated upon condition

            var choices;


            // If confirmed character, number and uppercase all items are provided
            if (confirmCharacter && confirmNumber && confirmUppercase) {
                // converts letters to uppercase 
                toUpper = function (x) {
                    return x.toUpperCase();
                };
                // creates a variable for uppercase conversion
                var alpha2 = alpha.map(toUpper);
                choices = character.concat(number, alpha, alpha2);
            }
            // Else if confirmed character and number, uppercase is ommited. 
            // User received characters, numbers and lowercase only
            else if (confirmCharacter && confirmNumber) {
                choices = character.concat(number, alpha);
            }
            // Else if confirmed character, number and character  uppercase is ommited.
            // User received characters, lowercase only 
            else if (confirmCharacter) {
                choices = character.concat(alpha);
            } else {
                choices = alpha;
            };

            // password variable is an array placeholder for user generated amount of length
            var password = [];
            // Start random selection variables:
            // Random selection for all variables: 

            for (var i = 0; i < enter; i++) {
                var pickChoices = choices[Math.floor(Math.random() * choices.length)];
                password.push(pickChoices);
            }
            // This joins the password array and converts it to a string
            var ps = password.join("");
            UserInput(ps);
            return ps;
        }





        // Random selection for individual variables:
        // Random selection for special character variables:
        // var pickCharacter = character[Math.floor(Math.random() * number.length)];
        // console.log(pickCharacter);
        // // Random selection for number variables:
        // var pickNumber = number[Math.floor(Math.random() * number.length)];
        // console.log(pickNumber);
        // // Random selection for alphabet variables:
        // var pickAlpha = alpha[Math.floor(Math.random() * alpha.length)];
        // console.log(pickAlpha);

        // test 

        // This puts the password value into the textbox
        // Error: when pressing generate repeatedly, it produces the same password, not a new one
        // Must refresh for new

        // Try this instead of generate password function: 

        // var generate = document.querySelector("#generate");
        // generate.addEventListener("click", function () {
        //     generatePassword();
        // });

        // function generatePassword() {
        //     generate.textContent = value + ps;
        // };
        // Do I need a function for the prompt + confirm ?

        function UserInput(ps) {
            document.getElementById("password").value = ps;
            console.log(ps);

        }

        // This copies the password value - works
        // Code example demonstrated in a youtube video: 
        // Source: https://youtu.be/9sT03jEwcaw
        function copyPassword() {
            document.getElementById("password").select();
            document.execCommand("Copy");
            alert("Password copied to clipboard!");

        }


    </script>
</head>

<body>
    <div id="wrapper">
        <header>
            <h1>Password Generator</h1>
        </header>
        <div id="content">
            <h2>Generate a Password</h2>
            <hr>
            <textarea readonly id="password" placeholder="Your Secure Password"
                aria-label="Generated Password"></textarea>
            <hr>
            <div id="btn">
                <button id="generate" onclick="generatePassword()">Generate
                    Password</button>
                <button id="copy" onclick="copyPassword()">Copy to Clipboard</button>
                </button>

            </div>
        </div>
    </div>
</body>

</html>